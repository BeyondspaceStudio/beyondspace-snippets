window.addEventListener("load",(event)=>{const formBlocks=document.querySelectorAll('.sqs-block-form');const triggerInputChange=(inputElement,value)=>{const nativeInputValueSetter=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;nativeInputValueSetter.call(inputElement,value);const inputEvent=new Event("input",{bubbles:!0});inputElement.dispatchEvent(inputEvent)}
const updateFormSubjects=(blocks)=>{blocks.forEach((block)=>{const timestamp=new Date().toLocaleString(Static.SQUARESPACE_CONTEXT.website.language);const pageTitle=document.title||"";const pagePath=window.location.pathname||"";const subjectInput=block.querySelector(`[placeholder^="Subject"]`);if(subjectInput){const subjectField=subjectInput.closest(`.form-item`);subjectField.hidden=!0;subjectField.style.display='none';let subjectTemplate=subjectInput.placeholder.replace('Subject','').trim()||"";let subjectValue=subjectTemplate;if(subjectTemplate.includes("{timestamp}")){subjectValue=subjectValue.replace("{timestamp}",timestamp)}
if(subjectTemplate.includes("{pagetitle}")){subjectValue=subjectValue.replace("{pagetitle}",pageTitle)}
if(subjectTemplate.includes("{pagepath}")){subjectValue=subjectValue.replace("{pagepath}",pagePath)}
if(!subjectTemplate.includes("{timestamp}")&&!subjectTemplate.includes("{pagetitle}")&&!subjectTemplate.includes("{pagepath}")){subjectValue=timestamp}
triggerInputChange(subjectInput,subjectValue)}})};updateFormSubjects(formBlocks);const lightboxObserver=new MutationObserver((mutationsList)=>{for(const mutation of mutationsList){if(mutation.type==='attributes'&&mutation.attributeName==='hidden'){const lightbox=mutation.target;if(!lightbox.hasAttribute('hidden')){const lightboxForms=lightbox.querySelectorAll('.sqs-block-form');updateFormSubjects(lightboxForms)}}}});const lightboxElements=document.querySelectorAll('.sqs-modal-lightbox');lightboxElements.forEach((lightbox)=>{lightboxObserver.observe(lightbox,{attributes:!0})})})
